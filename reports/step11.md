# Step11 Report

## 2018011423 任一

### 实验内容

在本次实验中，我完整阅读并学习了实验参考书中的内容，并且加入了类型检查相关的内容。类型检查实际上是在名称解析之后，对AST进行的又一次遍历，加入了有关类型的信息，具体来说就是加入了`typer.py`和`types.py`这两个文件。
在`types.py`文件中，定义了各个类型的类，在`typer.py`中，定义了进行类型检查的visitor，在
visitor中重写了`visitPtrType`, `visitIntType`, `visitChildren`等函数，以便在进行AST遍历时，
记录类型的信息。


### 思考题

1. Q: 为什么类型检查要放在名称解析之后？

   A: 在类型检查中，需要找到每个`Identifier`对应的`Variable`（具体来说在`visitAtomIdent`与`visitDeclaration`中需要）。在名称解析当中，进行了这样的对应，因此类型检查在名称解析之后，可以直接调用名称解析中进行的`Ident`与`Variable`的对应。

2. Q: MiniDecaf 中一个值只能有一种类型，但在很多语言中并非如此，请举出一个反例。

   A: 在Python中，一个变量可以被赋予不同类型的值，例如下面的例子, 变量`x`先后是`int`类型和`str`类型。

   ```python
   x = 0
   x = 'hello'
   ```

3. Q: 在本次实验中我们禁止进行指针的比大小运算。请问如果要实现指针大小比较需要注意什么问题？可以和原来整数比较的方法一样吗？

   A: 指针的比较与整数的比较基本一样。还需要注意不同类型的指针之间的比较。

### 复用代码情况

本次实验中，我主要参考了助教Typer的实现，并且参考了各种变量类型的实现。这部分难度较大，我在仔细阅读和理解助教的参考实现后，
进行了实现，并在关键处加入了详细的注释，以便于自己的理解。
