# Step12 Report

## 2018011423 任一

### 实验内容

在本次实验中，我完整阅读并学习了实验参考书中的内容，并且加入了数组相关的内容。具体来说，在名称解析时，计算数组的大小并分配内存空间。此外，我也加入了指针计算的相关内容，主要考虑了整数-整数，整数-指针，指针-指针，指针-整数这4种情况。



### 思考题

1. Q: 为什么类型检查要放在名称解析之后？

   A: 在类型检查中，需要区分不同作用域的同名变量。因此，先做名称解析可以区分不同作用域的同名变量，方便类型检查对这些变量做相应的检查。

2. Q: [思考题2](https://decaf-lang.github.io/minidecaf-tutorial/docs/lab12/guide.html)：请分别给出每个函数的返回值。

   A: 

   | 函数名 | 返回值                       |
   | ------ | ---------------------------- |
   | A      | `*(int*)(4096+23*4)`         |
   | B      | `*(int*)(4096+23*4)`         |
   | C      | `**(int**)(4096+(10*2+3)*4)` |
   | D      | `**(int**)(4096+(10*2+3)*4)` |
   | E      | `**(int**)(4096+(4*2+3)*4)`  |

   

3. Q: 请你简要回答，如果我们决定支持一维的可变长度的数组(即允许类似 `int n = 5; int a[n];` 这种，但仍然不允许类似 `int n = ...; int m = ...; int a[n][m];` 这种)，而且要求数组仍然保存在栈上（即不允许用堆上的动态内存申请，如`malloc`等来实现它），应该在现有的实现基础上做出那些改动？

   A:  `int n = 5; int a[n]`这种可变长度的数组，可以在进入函数时，解析`n`的数值之后，再根据`n`的值，对数组`a[n]`进行内存空间的分配。

### 复用代码情况

本次实验中，对助教参考实现主要参考了指针计算的部分。我在详细阅读并理解助教参考实现后，进行了自己的实现，并在关键处加入了注释以方便自己的理解。
